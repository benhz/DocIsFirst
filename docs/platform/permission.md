# 权限管理

## 权限模型

采用 **RBAC**（基于角色的访问控制）模型：

```
用户 → 角色 → 权限 → 资源
```

### 核心概念
- **用户（User）**：登录系统的人或服务
- **角色（Role）**：一组权限的集合
- **权限（Permission）**：对资源的操作能力
- **资源（Resource）**：系统中的具体对象

## 预置角色

| 角色 | 说明 | 权限范围 |
|-----|------|---------|
| 超级管理员 | 系统最高权限 | 所有权限 |
| 产品管理员 | 管理某个产品 | 产品内所有权限 |
| 开发者 | 开发和调试 | 读写 + API 调用 |
| 分析师 | 数据分析 | 只读 + 导出 |
| 访客 | 临时访问 | 只读 |

## 权限申请流程

```
1. 用户发起申请（说明原因）
   ↓
2. 部门主管审批
   ↓
3. 系统管理员审批
   ↓
4. 自动开通权限
   ↓
5. 邮件通知用户
```

### 如何申请权限
1. 登录系统
2. 进入「权限申请」页面
3. 选择需要的角色或权限
4. 填写申请理由
5. 提交等待审批

## 细粒度权限

### 资源级权限
可以控制到具体资源：
- 项目 A：可读写
- 项目 B：只读
- 项目 C：无权限

### 字段级权限
可以控制到具体字段：
- 查看基本信息：允许
- 查看敏感信息：拒绝

### 操作级权限
- `read`：查看
- `create`：创建
- `update`：编辑
- `delete`：删除
- `export`：导出

## 权限审计

### 审计日志
系统记录所有权限相关操作：
- 权限授予记录
- 权限变更记录
- 敏感操作记录

### 查看审计日志
管理员可在「审计日志」页面查看：
- 操作人
- 操作时间
- 操作内容
- 操作结果

## 最佳实践

### 最小权限原则
- 只授予必需的权限
- 定期清理不用的权限
- 临时权限设置过期时间

### 定期审查
建议每季度审查一次：
- 检查权限是否过度
- 清理离职人员权限
- 更新角色定义

## API 权限控制

```bash
# 使用 Token 调用 API，自动继承用户权限
curl -H "Authorization: Bearer YOUR_TOKEN" \
  https://api.example.com/v1/projects/123
```

详见 [API 文档](../api/auth.md)

## 常见问题

### Q：权限申请需要多久？
A：一般 1-2 个工作日，紧急情况可联系管理员加急。

### Q：如何查看我有哪些权限？
A：进入「个人中心」→「我的权限」

### Q：权限被拒绝怎么办？
A：检查申请理由是否充分，或联系审批人沟通。
