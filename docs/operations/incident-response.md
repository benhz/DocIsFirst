# 故障响应流程

## 故障等级

| 等级 | 影响 | 响应时间 | 示例 |
|-----|------|---------|------|
| P0 | 核心业务中断 | 5 分钟 | 服务宕机、数据丢失 |
| P1 | 主要功能受影响 | 30 分钟 | 部分功能不可用 |
| P2 | 次要功能受影响 | 2 小时 | 性能下降 |

## 响应流程

```
1. 发现故障（监控告警 / 用户反馈）
   ↓
2. 确认故障等级
   ↓
3. 拉群沟通（值班+相关人员）
   ↓
4. 应急处理（止损）
   ↓
5. 根因分析
   ↓
6. 彻底修复
   ↓
7. 故障复盘
```

## 应急操作

### 服务重启
```bash
kubectl rollout restart deployment/app-name
```

### 流量切换
```bash
# 切换到备用集群
kubectl patch service app-name -p '{"spec":{"selector":{"version":"backup"}}}'
```

### 数据回滚
（谨慎操作，需 DBA 参与）

## 故障通报

- 内部：企业微信群
- 外部：状态页 status.example.com

## 故障复盘

故障后 48 小时内完成复盘：
1. 故障描述
2. 影响范围
3. 根本原因
4. 处理过程
5. 改进措施
